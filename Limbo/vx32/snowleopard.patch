diff -r 8184025094f4 src/9vx/a/dat.h
--- src/9vx/a/dat.h	Mon Oct 05 02:53:41 2009 -0400
+++ src/9vx/a/dat.h	Sun Nov 15 14:20:49 2009 -0200
@@ -1,3 +1,5 @@
+#define _XOPEN_SOURCE 1000
+
 #include <ucontext.h>
 #include "libvx32/vx32.h"
 
diff -r 8184025094f4 src/libvx32/darwin.c
--- src/libvx32/darwin.c	Mon Oct 05 02:53:41 2009 -0400
+++ src/libvx32/darwin.c	Sun Nov 15 14:20:49 2009 -0200
@@ -3,6 +3,7 @@
 // get access to mcontext and thread_state fields with their normal names,
 // not with everything prefixed by __ due to namespace cleanliness paranoia
 #define __DARWIN_UNIX03 0
+#define _XOPEN_SOURCE 1000
 
 #include <string.h>
 #include <signal.h>
diff -r 8184025094f4 src/libvx32/sig.c
--- src/libvx32/sig.c	Mon Oct 05 02:53:41 2009 -0400
+++ src/libvx32/sig.c	Sun Nov 15 14:20:49 2009 -0200
@@ -1,3 +1,5 @@
+#define _XOPEN_SOURCE 1000
+
 #include <sys/signal.h>
 #include <ucontext.h>
 #include <stdio.h>
diff -r 8184025094f4 src/libvx32/vx32impl.h
--- src/libvx32/vx32impl.h	Mon Oct 05 02:53:41 2009 -0400
+++ src/libvx32/vx32impl.h	Sun Nov 15 14:20:49 2009 -0200
@@ -1,9 +1,12 @@
 #ifndef VX32_IMPL_H
 #define VX32_IMPL_H
 
+#define _XOPEN_SOURCE 1000
+
 #include <setjmp.h>
 #include <sys/signal.h>
 #include <ucontext.h>
+#include <sys/mman.h>
 
 // Parameters tweakable for performance
 #define VXPROCSMAX	256		// Max # of vxprocs per host proc
